<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Store data through Repository | Krayin CRM Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <meta name="description" content="Krayin CRM Developer Portal">
    
    <link rel="preload" href="/assets/css/0.styles.7e612dfc.css" as="style"><link rel="preload" href="/assets/js/app.75b67cb2.js" as="script"><link rel="preload" href="/assets/js/2.d530cad3.js" as="script"><link rel="preload" href="/assets/js/80.7473d316.js" as="script"><link rel="prefetch" href="/assets/js/10.8cab4b6e.js"><link rel="prefetch" href="/assets/js/11.4f281b62.js"><link rel="prefetch" href="/assets/js/12.5a40d0d8.js"><link rel="prefetch" href="/assets/js/13.5c0ee923.js"><link rel="prefetch" href="/assets/js/14.2282aadc.js"><link rel="prefetch" href="/assets/js/15.4db3cc42.js"><link rel="prefetch" href="/assets/js/16.888cbd2f.js"><link rel="prefetch" href="/assets/js/17.8a985666.js"><link rel="prefetch" href="/assets/js/18.61d26662.js"><link rel="prefetch" href="/assets/js/19.2f573399.js"><link rel="prefetch" href="/assets/js/20.c0bbfbd5.js"><link rel="prefetch" href="/assets/js/21.6af1f269.js"><link rel="prefetch" href="/assets/js/22.96500ba3.js"><link rel="prefetch" href="/assets/js/23.f12b926b.js"><link rel="prefetch" href="/assets/js/24.c3a6a588.js"><link rel="prefetch" href="/assets/js/25.85e7f506.js"><link rel="prefetch" href="/assets/js/26.6cc3d8a5.js"><link rel="prefetch" href="/assets/js/27.90cd5707.js"><link rel="prefetch" href="/assets/js/28.800e2510.js"><link rel="prefetch" href="/assets/js/29.6d0fd8f4.js"><link rel="prefetch" href="/assets/js/3.f92e252e.js"><link rel="prefetch" href="/assets/js/30.6b9acc58.js"><link rel="prefetch" href="/assets/js/31.1d870f94.js"><link rel="prefetch" href="/assets/js/32.4a78490b.js"><link rel="prefetch" href="/assets/js/33.dac304d5.js"><link rel="prefetch" href="/assets/js/34.9e8ba84b.js"><link rel="prefetch" href="/assets/js/35.36678915.js"><link rel="prefetch" href="/assets/js/36.38d7b18c.js"><link rel="prefetch" href="/assets/js/37.10312aba.js"><link rel="prefetch" href="/assets/js/38.c9f03215.js"><link rel="prefetch" href="/assets/js/39.b804d931.js"><link rel="prefetch" href="/assets/js/4.cc99b832.js"><link rel="prefetch" href="/assets/js/40.d1c82262.js"><link rel="prefetch" href="/assets/js/41.67008104.js"><link rel="prefetch" href="/assets/js/42.e380c962.js"><link rel="prefetch" href="/assets/js/43.2b28650a.js"><link rel="prefetch" href="/assets/js/44.acba3fd2.js"><link rel="prefetch" href="/assets/js/45.be6a0569.js"><link rel="prefetch" href="/assets/js/46.d82b378b.js"><link rel="prefetch" href="/assets/js/47.46901543.js"><link rel="prefetch" href="/assets/js/48.51b409bf.js"><link rel="prefetch" href="/assets/js/49.73aee9be.js"><link rel="prefetch" href="/assets/js/5.79517842.js"><link rel="prefetch" href="/assets/js/50.fe416cd0.js"><link rel="prefetch" href="/assets/js/51.70d89d0b.js"><link rel="prefetch" href="/assets/js/52.18086cb9.js"><link rel="prefetch" href="/assets/js/53.af0e61a2.js"><link rel="prefetch" href="/assets/js/54.b6c07e4f.js"><link rel="prefetch" href="/assets/js/55.55eae2fe.js"><link rel="prefetch" href="/assets/js/56.8847b8df.js"><link rel="prefetch" href="/assets/js/57.775a14d6.js"><link rel="prefetch" href="/assets/js/58.a85550c6.js"><link rel="prefetch" href="/assets/js/59.8652ad97.js"><link rel="prefetch" href="/assets/js/6.24736215.js"><link rel="prefetch" href="/assets/js/60.6e71bbb4.js"><link rel="prefetch" href="/assets/js/61.122f48f2.js"><link rel="prefetch" href="/assets/js/62.b2834953.js"><link rel="prefetch" href="/assets/js/63.d836e79a.js"><link rel="prefetch" href="/assets/js/64.ba11d11a.js"><link rel="prefetch" href="/assets/js/65.06190da5.js"><link rel="prefetch" href="/assets/js/66.59da1d53.js"><link rel="prefetch" href="/assets/js/67.8a2b004c.js"><link rel="prefetch" href="/assets/js/68.f6938215.js"><link rel="prefetch" href="/assets/js/69.2701ce9a.js"><link rel="prefetch" href="/assets/js/7.b3db6669.js"><link rel="prefetch" href="/assets/js/70.ad8650c2.js"><link rel="prefetch" href="/assets/js/71.b06525f8.js"><link rel="prefetch" href="/assets/js/72.ab2deeb7.js"><link rel="prefetch" href="/assets/js/73.5eaab064.js"><link rel="prefetch" href="/assets/js/74.1b24071e.js"><link rel="prefetch" href="/assets/js/75.65187de4.js"><link rel="prefetch" href="/assets/js/76.b9bb34b4.js"><link rel="prefetch" href="/assets/js/77.3ff80830.js"><link rel="prefetch" href="/assets/js/78.e14b8ebb.js"><link rel="prefetch" href="/assets/js/79.15dc0f3f.js"><link rel="prefetch" href="/assets/js/8.507f6b18.js"><link rel="prefetch" href="/assets/js/81.9e72e2ec.js"><link rel="prefetch" href="/assets/js/82.6167bb9f.js"><link rel="prefetch" href="/assets/js/83.89f9071f.js"><link rel="prefetch" href="/assets/js/84.638af48b.js"><link rel="prefetch" href="/assets/js/85.e5c6a009.js"><link rel="prefetch" href="/assets/js/86.0525fd44.js"><link rel="prefetch" href="/assets/js/87.1d4b576d.js"><link rel="prefetch" href="/assets/js/88.0a48102f.js"><link rel="prefetch" href="/assets/js/89.172ce88d.js"><link rel="prefetch" href="/assets/js/9.446d6bca.js"><link rel="prefetch" href="/assets/js/90.e97a1732.js"><link rel="prefetch" href="/assets/js/91.f21f654b.js"><link rel="prefetch" href="/assets/js/92.737d9dc7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7e612dfc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Krayin CRM Documentation" class="logo"> <span class="site-name can-hide">Krayin CRM Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <a href="https://github.com/krayin/krayin-crm" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute to Krayin CRM
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <a href="https://github.com/krayin/krayin-crm" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute to Krayin CRM
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/1.x/introduction" class="sidebar-heading clickable"><span>Introduction</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/1.x/packages" class="sidebar-heading clickable router-link-active open"><span>Package Development</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/1.x/packages/create-package.html" class="sidebar-link">Create a new package</a></li><li><a href="/1.x/packages/create-migrations.html" class="sidebar-link">Create migrations</a></li><li><a href="/1.x/packages/add-menu-in-admin.html" class="sidebar-link">Add menu in admin</a></li><li><a href="/1.x/packages/create-acl.html" class="sidebar-link">Access control list</a></li><li><a href="/1.x/packages/create-custom-configuration.html" class="sidebar-link">Create custom configuration</a></li><li><a href="/1.x/packages/create-models.html" class="sidebar-link">Create models</a></li><li><a href="/1.x/packages/store-data-through-repositories.html" aria-current="page" class="active sidebar-link">Store data through repositories</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1.x/packages/store-data-through-repositories.html#contracts-repositories-and-proxies" class="sidebar-link">Contracts, Repositories and Proxies</a></li><li class="sidebar-sub-header"><a href="/1.x/packages/store-data-through-repositories.html#steps-to-store-data-through-repository" class="sidebar-link">Steps to store data through repository</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/1.x/custom-attributes" class="sidebar-heading clickable"><span>Custom Attributes</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/1.x/datagrid" class="sidebar-heading clickable"><span>Datagrid</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="store-data-through-repository"><a href="#store-data-through-repository" class="header-anchor">#</a> Store data through Repository</h1> <h2 id="contracts-repositories-and-proxies"><a href="#contracts-repositories-and-proxies" class="header-anchor">#</a> Contracts, Repositories and Proxies</h2> <h3 id="contracts"><a href="#contracts" class="header-anchor">#</a> Contracts</h3> <p>Laravel's Contracts are a set of interfaces that define the core services provided by the framework. For example, an <code>Illuminate\Contracts\Queue\Queue</code> contract defines the methods needed for queueing jobs, while the <code>Illuminate\Contracts\Mail\Mailer</code> contract defines the methods needed for sending an e-mail.</p> <p>Each contract has a corresponding implementation provided by the framework. For example, Laravel provides a queue implementation with a variety of drivers, and a mailer implementation that is powered by SwiftMailer.</p> <p>All of the Laravel contracts live in their own GitHub repository. This provides a quick reference point for all available contracts, as well as a single, decoupled package that may be utilized by package developers.</p> <h3 id="repositories"><a href="#repositories" class="header-anchor">#</a> Repositories</h3> <p>Generally, we wrote all of our application logic in the controller. There’s an alternative approach of development that abstracts some calls into PHP classes called Repositories. The idea is that we can decouple models from controllers and assign a readable name's to complicated queries.</p> <p>This file defines our Repository class. Instances of this class have a model property that we tie to an Eloquent model. Once this is bound in the constructor we can call Eloquent methods like findOrFail, update or all from the class methods.</p> <h3 id="proxies"><a href="#proxies" class="header-anchor">#</a> Proxies</h3> <p>Proxies as their name state will drive you to the actual model class. The concept of model proxies has been introduced to override the functionality of the existing Model. It is a type of model inheritance without creating a new table in the database.</p> <h2 id="steps-to-store-data-through-repository"><a href="#steps-to-store-data-through-repository" class="header-anchor">#</a> Steps to store data through repository</h2> <ul><li><p>For creating models, create a file named as <code>HelloWorld.php</code> in <code>packages/ACME/HelloWorld/src/Models</code>, and copy the below code in file,</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>HelloWorld</span> <span class="token keyword">as</span> HelloWorldContract<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token keyword">implements</span> <span class="token class-name">HelloWorldContract</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$fillable</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div></li></ul> <blockquote><p>Note: If you have created model by using <strong>Bagisto Package Generator</strong>, then you can skip the model proxy and contract creation step.</p></blockquote> <ul><li><p>Now, at the same location create a model proxy file as <code>HelloWorldProxy.php</code>. This Proxy class will extends <code>Konekt\Concord\Proxies\ModelProxy</code>. Copy the below code in file,</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Konekt<span class="token punctuation">\</span>Concord<span class="token punctuation">\</span>Proxies<span class="token punctuation">\</span>ModelProxy</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HelloWorldProxy</span> <span class="token keyword">extends</span> <span class="token class-name">ModelProxy</span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</span></code></pre></div></li> <li><p>Now, create a folder named as <code>Contracts</code> and create an interface file named as <code>HelloWorld.php</code>,</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Contracts</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">HelloWorld</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</span></code></pre></div></li> <li><p>Create a <code>Repository</code> folder and create a file <code>HelloWorldRepository.php</code> and create the <code>model()</code> method in repository class which returns the path of your contract class.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Repositories</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Webkul<span class="token punctuation">\</span>Core<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Repository</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HelloWorldRepository</span> <span class="token keyword">extends</span> <span class="token class-name">Repository</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Specify Model class name
    *
    * @return mixed
    */</span>
    <span class="token keyword">function</span> <span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string single-quoted-string">'ACME/HelloWorld/Contracts/HelloWorld'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><p>You can use <strong>Bagisto Package Generator</strong> also,</p> <p><code>php artisan package:make-repository HelloWorldRepository ACME/HelloWorld</code></p></li></ul></div></li> <li><p>After creating all the files stated above, we have to create a provider as  <code>ModuleServiceProvider.php</code>. In this file, models which are used in this package are registered. You may check below code,</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Konekt<span class="token punctuation">\</span>Concord<span class="token punctuation">\</span>BaseModuleServiceProvider</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ModuleServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">BaseModuleServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$models</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token class-name class-name-fully-qualified static-context">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>HelloWorld</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div></li> <li><p>Now, Register your <code>ModuleServiceProvider.php</code> in <code>config/concord.php</code> file,</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'modules'</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token class-name class-name-fully-qualified static-context">ACME<span class="token punctuation">\</span>HelloWorld<span class="token punctuation">\</span>Providers<span class="token punctuation">\</span>ModuleServiceProvider</span><span class="token operator">::</span><span class="token keyword">class</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></code></pre></div></li> <li><p>Now, you are all set to go.</p></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/krayin/krayin-crm-docs/edit/master/docs/1.x/packages/store-data-through-repositories.md" target="_blank" rel="noopener noreferrer">Help us improve this page on Github.</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/23/2021, 1:42:17 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/1.x/packages/create-models.html" class="prev">
        Create models
      </a></span> <span class="next"><a href="/1.x/custom-attributes/uses.html">
        How to use custom attribute
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.75b67cb2.js" defer></script><script src="/assets/js/2.d530cad3.js" defer></script><script src="/assets/js/80.7473d316.js" defer></script>
  </body>
</html>
